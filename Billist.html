<html>
  <head>
    <title>Billist</title>
      <link rel="stylesheet" href="style.css">
      <link href="https://fonts.googleapis.com/css?family=Jockey+One" rel="stylesheet">
  </head>

<style>
  body {
    background-color: #6A1B9A;
  }
  </style>

  <body>

  <form id="billForm" method="post">
    <img src="E:\Portfolio\Projects\Billist\images\billist_logo.PNG" alt="billist_logo">
    <input type="text" name="restaurantName" class="field textField" id="restaurantName" placeholder="Restaurant Name" required> </br>
    <input type="number" step="0.01" name="billAmount" class="field textField" id="billAmt" placeholder="Bill Amount ($)" required> </br>
    <input type="text" name="tipPercentage" class="field textField" id="tipPercentage" placeholder="Tip Percentage (%)" readonly required> </br>
    <input type="range" class="slider" min="0" max="100" step="1" value="50" id="slider"> </br>
    <input type="text" name="tipAmount" class="field textField" id="tipAmt" placeholder="Tip Amount ($)" readonly required> </br>
    <input type="text" name="totalAmount" class="field textField" placeholder="Total Bill Amount ($)" id="totalBill" readonly required> </br>
    <input type="button" name="caluculateTip" class="field buttons" id="calculateTotalBill" value="Calculate Bill">
    <input type="submit" name="saveBill" class="field buttons" id="submit" value="Save This Bill">
    <input type="button" name="clear" class="field buttons" id="clear" value="Clear">
  </form>

  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript">

  let restaurantName = "";
  let billAmount = 0.00;
  let tipAmount = 0.00;
  let totalAmount = 0.00;
  let totalBill = 0.00;
  let tipPercent = 0.00;

   var billEntree = {
     "Restaurant Name": restaurantName.value,
     "Bill Amount": billAmount.value,
     "Tip Amount": tipAmount.value,
     "Total Bill": totalBill.value,
   };

    $('#slider').on('input', function(){
      $('#tipPercentage').val($('#slider').val());
    });

    document.getElementById("calculateTotalBill").onclick = function() {
      billAmount = document.getElementById("billAmt").value;
      tipAmount = document.getElementById("tipAmt").value;
      tipPercent = document.getElementById("tipPercentage").value;

      tipAmount = (((+billAmount) * (+tipPercent)) / 100).toFixed(2);
      finalAmount = (+billAmount + +tipAmount).toFixed(2);

      document.getElementById("tipAmt").value = "$" + tipAmount;
      document.getElementById("totalBill").value = "$" + finalAmount;
    }

     //Send data button
     document.getElementById("submit").onclick = function() {

       $(function() {
         $('#billForm').submit(function(event) {
           event.preventDefault();

           var newBillEntree = $(this);
           var submitButton = $('input[type=submit]', newBillEntree);

           $.ajax({
             type: 'POST',
             url: newBillEntree.prop('action'),
             accept: {
               javascript: 'application/javascript'
             },
             data: newBillEntree.serialize(),
             beforeSend: function() {
               submitButton.prop('disabled', 'disabled');
             }
            }).done(function(data) {
              submitButton.prop('disabled', false);
            });
          });
        });


       // let restaurantName = document.getElementById("restaurantName").value;;
       // let billAmount = document.getElementById("billAmt").value;
       // let tipAmount = document.getElementById("tipAmt").value;
       // let totalBill = document.getElementById("totalAmount").value;
       //
       //  let billEntree = {
       //    "Restaurant Name": restaurantName,
       //    "Bill Amount":  billAmount,
       //    "Tip Amount": tipAmount,
       //    "Total Bill": totalBill,
       //  };
       //
       //  let billEntreeObject = JSON.stringify(billEntree);
       //  localStorage.setItem("newBillEntree", billEntreeObject);

    }

//Clear button
    document.getElementById("clear").onclick = function() {
      document.getElementById("restaurantName").value = null;
      document.getElementById("billAmt").value = null;
      document.getElementById("tipAmt").value = null;
      document.getElementById("tipPercentage").value = null;
      document.getElementById("totalBill").value = null;

    }

  </script>

</body>
</html>
